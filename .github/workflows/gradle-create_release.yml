name: create_release

on:
  pull_request:
    branches: [ qa, master ]

jobs:
  create_release:

    runs-on: ubuntu-latest

    environment:
      name: develop

    steps:
      - uses: actions/checkout@v3

      - name: Release
        id: release
        run: |
          # Fetch a full copy of the repo, as required by release plugin:
          git fetch --tags --depth=10000
          
          # Run release:
          ./gradlew release -Prelease.disableChecks \
           -Prelease.customUsername=${{ github.actor }} \
           -Prelease.customPassword=${{ github.token }}
